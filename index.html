<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ALTHEA | V22.6 Master Key</title>
    <style>
        body { background: #000; color: #0f0; font-family: 'Courier New', monospace; padding: 20px; }
        .terminal { background: #050505; border: 1px solid #333; height: 280px; overflow-y: auto; padding: 10px; margin-bottom: 20px; font-size: 0.85em; box-shadow: inset 0 0 15px #000; }
        .uplink-zone { border: 2px dashed #0f0; padding: 40px; text-align: center; border-radius: 10px; cursor: pointer; display: block; }
        .uplink-zone:hover { background: #001100; box-shadow: 0 0 10px #0f0; }
        .cmd { color: #555; }
        .highlight { color: #fff; text-shadow: 0 0 5px #0f0; }
        .tunnel-active { color: #ffff00; font-weight: bold; }
        input[type="file"] { display: none; }
    </style>
</head>
<body>
    <h1>ALTHEA ROUTER [SCANNER]</h1>
    <p style="font-size: 0.7em; color: #006600;">MASTER KEY PROTOCOL // V22.6</p>
    
    <div class="terminal" id="term">
        <div><span class="cmd">system@althea:~$</span> auth --master-key</div>
        <div><span class="cmd">system@althea:~$</span> status --ready</div>
    </div>

    <label class="uplink-zone">
        <span class="highlight">[+] UPLINK / SCAN VESSEL</span>
        <input type="file" id="fileInput" onchange="processFile(this)">
    </label>

    <script>
        const term = document.getElementById('term');
        
        function log(msg) {
            term.innerHTML += `<div><span class="cmd">scan_log:</span> ${msg}</div>`;
            term.scrollTop = term.scrollHeight;
        }

        function processFile(input) {
            const file = input.files[0];
            if (!file) return;

            log(`Captured: <span class="highlight">${file.name}</span>`);
            
            // MASTER KEY: Force Chrome to look at the Pyto local directory
            // This bypasses the GitHub web-path and hits the private storage
            const localBase = "private/var/mobile/Containers/Data/Application/Pyto/Documents/ALTHEA%20Router/apps/";
            const safeName = encodeURIComponent(file.name);
            
            log(`<span class="tunnel-active">LOCAL TUNNEL ENGAGED</span>`);
            log(`Target: ${localBase}`);
            
            // Build the Chrome Injection Link
            const chromeLink = "googlechrome://" + localBase + safeName;
            
            log(`Deep-Link: <span style="color: cyan;">${chromeLink}</span>`);
            log(`Executing Private Handoff...`);
            
            setTimeout(() => {
                window.location.href = chromeLink;
            }, 1000);
        }
    </script>
</body>
</html>
