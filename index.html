<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ALTHEA | UNIVERSAL BRIDGE</title>
    <style>
        body { background: #000; color: #0f0; font-family: 'Courier New', monospace; padding: 20px; }
        .terminal { background: #050505; border: 1px solid #333; height: 200px; overflow-y: auto; padding: 10px; margin-bottom: 20px; font-size: 0.8em; }
        .uplink-zone { border: 2px dashed #0f0; padding: 30px; text-align: center; border-radius: 10px; cursor: pointer; display: block; margin-bottom: 10px; }
        .toggle-btn { background: #111; color: #0f0; border: 1px solid #0f0; padding: 10px; width: 100%; cursor: pointer; font-weight: bold; }
        .toggle-btn.active { background: #0f0; color: #000; }
        .cmd { color: #555; }
        input[type="file"] { display: none; }
    </style>
</head>
<body>
    <h1>ALTHEA ROUTER [BRIDGE]</h1>
    
    <div class="terminal" id="term">
        <div><span class="cmd">system@althea:~$</span> bridge --ready</div>
    </div>

    <button id="modeBtn" class="toggle-btn" onclick="toggleMode()">MODE: LOCAL (IPHONE)</button>

    <label class="uplink-zone" style="margin-top: 15px;">
        <span>[+] UPLINK / SCAN FILE</span>
        <input type="file" id="fileInput" onchange="processFile(this)">
    </label>

    <script>
        let isLocalMode = true;
        const term = document.getElementById('term');
        const modeBtn = document.getElementById('modeBtn');

        function toggleMode() {
            isLocalMode = !isLocalMode;
            modeBtn.innerText = isLocalMode ? "MODE: LOCAL (IPHONE)" : "MODE: CLOUD (GITHUB)";
            modeBtn.classList.toggle('active');
            log(`Switching to ${isLocalMode ? 'Local Handoff' : 'Cloud Sync'}`);
        }

        function log(msg) {
            term.innerHTML += `<div><span class="cmd">bridge_log:</span> ${msg}</div>`;
            term.scrollTop = term.scrollHeight;
        }

        function processFile(input) {
            const file = input.files[0];
            if (!file) return;

            const safeName = encodeURIComponent(file.name);
            let finalURL = "";

            if (isLocalMode) {
                // FORCE: Look at your iPhone's Pyto folder
                finalURL = "googlechrome://localhost/~/Documents/ALTHEA%20Router/apps/" + safeName;
                log(`Directing Chrome to Local Sandbox...`);
            } else {
                // SYNC: Look at the GitHub Pages folder [cite: 2026-01-13]
                finalURL = "googlechrome://cbash000.github.io/Chrome_door/apps/" + safeName;
                log(`Directing Chrome to GitHub Cloud...`);
            }

            log(`Deep-Link: ${finalURL}`);
            
            setTimeout(() => {
                window.location.href = finalURL;
            }, 800);
        }
    </script>
</body>
</html>
