<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ALTHEA | V23.0 DEPLOYMENT</title>
    <style>
        body { background: #000; color: #0f0; font-family: 'Courier New', monospace; padding: 20px; overflow-x: hidden; }
        .terminal { background: #050505; border: 1px solid #333; height: 280px; overflow-y: auto; padding: 10px; font-size: 0.8em; box-shadow: inset 0 0 15px #000; }
        .status-bar { display: flex; align-items: center; gap: 10px; margin: 15px 0; padding: 10px; border: 1px solid #222; }
        #statusLight { width: 12px; height: 12px; border-radius: 50%; background: #300; transition: 0.3s; }
        .uplink-zone { border: 2px dashed #0f0; padding: 30px; text-align: center; cursor: pointer; display: block; transition: 0.3s; }
        .uplink-zone:hover { background: #001100; box-shadow: 0 0 15px #0f0; }
        #previewContainer { margin-top: 15px; border-top: 1px solid #333; padding-top: 15px; }
        iframe { width: 100%; height: 200px; border: 1px solid #111; background: #000; }
        .launch-btn { width: 100%; padding: 15px; background: #111; color: #444; border: 1px solid #333; font-weight: bold; cursor: not-allowed; margin-top: 10px; }
        .active-btn { background: #0f0 !important; color: #000 !important; cursor: pointer !important; box-shadow: 0 0 20px #0f0; }
        input[type="file"] { display: none; }
    </style>
</head>
<body>
    <h1>ALTHEA ROUTER [V23.0]</h1>
    
    <div class="terminal" id="term">
        <div>system@althea:~$ boot --sequence</div>
    </div>

    <div class="status-bar">
        <div id="statusLight"></div>
        <span id="statusText" style="color: #444;">IDLE: AWAITING VESSEL...</span>
    </div>

    <label class="uplink-zone" id="dropZone">
        <span>[+] UPLINK / SCAN FILE</span>
        <input type="file" id="fileInput" onchange="initiateScan(this)">
    </label>

    <div id="previewContainer" style="display:none;">
        <iframe id="vesselFrame"></iframe>
        <button id="launchBtn" class="launch-btn" onclick="startLaunch()">EXECUTE LAUNCH SEQUENCE</button>
    </div>

    <script>
        const term = document.getElementById('term');
        const light = document.getElementById('statusLight');
        const sText = document.getElementById('statusText');
        const btn = document.getElementById('launchBtn');
        let finalPath = "";

        function log(msg, color = "#0f0") {
            term.innerHTML += `<div><span style="color:#555">bridge_log:</span> <span style="color:${color}">${msg}</span></div>`;
            term.scrollTop = term.scrollHeight;
        }

        // CONSOLE MIRROR: Listen for messages from the iframe
        window.addEventListener('message', (e) => {
            if (e.data.type === 'vessel_log') {
                log(`[VESSEL]: ${e.data.msg}`, "cyan");
            }
        });

        function initiateScan(input) {
            const file = input.files[0];
            if (!file) return;

            // Updated pathing for PC-synced folder
            const safeName = encodeURIComponent(file.name);
            const cloudURL = `https://cbash000-cmd.github.io/Chrome_door/apps/${safeName}`;
            
            log(`Probing: ${file.name}...`);
            document.getElementById('previewContainer').style.display = "block";
            const frame = document.getElementById('vesselFrame');
            frame.src = cloudURL;

            frame.onload = () => {
                light.style.background = "#0f0";
                light.style.boxShadow = "0 0 15px #0f0";
                sText.innerText = "ONLINE: HANDSHAKE SUCCESS";
                sText.style.color = "#0f0";
                btn.classList.add('active-btn');
                btn.innerText = "EXECUTE LAUNCH SEQUENCE";
                log("Vessel integrity verified.");
            };

            finalPath = "googlechrome://" + cloudURL.replace("https://", "");
        }

        function startLaunch() {
            if (!finalPath) return;
            log("CRITICAL: Initializing Handoff...", "#fff");
            log("3... 2... 1...", "#0f0");
            setTimeout(() => { window.location.href = finalPath; }, 1500);
        }
    </script>
</body>
</html>
